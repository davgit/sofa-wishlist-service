/**
 * sofa-wishlist-service - v0.2.0 - 2014-04-22
 * http://www.sofa.io
 *
 * Copyright (c) 2014 CouchCommerce GmbH (http://www.couchcommerce.com / http://www.sofa.io) and other contributors
 * THIS SOFTWARE CONTAINS COMPONENTS OF THE SOFA.IO COUCHCOMMERCE SDK (WWW.SOFA.IO).
 * IT IS PROVIDED UNDER THE LICENSE TERMS OF THE ATTACHED LICENSE.TXT.
 */
!function(a){"use strict";a.define("sofa.WishlistService",function(b){var c={},d="wishlist_";a.observable.mixin(c),c.getItems=function(){return e(b.get(d)||{})},c.addItem=function(a,b,d){var e=a.urlKey+(d?"/"+d.variantID:""),g=c.getItems();return g[e]?g[e].quantity+=b:g[e]={product:a,key:e,quantity:b,variant:d},f(g),g[e]},c.removeItem=function(a){var b=a.key||a,d=c.getItems();delete d[b],f(d)},c.getItemCount=function(){return Object.keys(c.getItems()).length},c.isEmpty=function(){return 0===c.getItemCount()},c.exists=function(b){var d=c.getItems();return!a.Util.isUndefined(d[b])};var e=function(b){if(!b)return b;for(var c in b)b[c].product=a.Util.extend(new a.models.Product,b[c].product);return b},f=function(a){b.set(d,a),c.emit("itemsUpdated",c,a)};return c})}(sofa);